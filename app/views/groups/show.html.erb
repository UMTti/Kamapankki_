<div class="all">
<p id="notice"></p>

<h1> <%= @group.name %> </h1>

<%= @group.description %> 

<% if not @group.users.include?(current_user) %>
    <%= link_to "Join", join_group_path(@group), :class=> "btn btn-primary", :method => "post" %>
<% end %>

 <%= link_to "Write message", groupmessage_group_path(@group), :class=> "btn btn-primary" %> 

</br>
<% @group.messages.each do |m| %>

<% if m.content != nil && m.content != "" %>
<div style="background-color: #f0ad4e;width:70%;">
<%= m.title %>.
<%= m.content %>

<% @u = User.find_by_id(m.sender_id) %>
<%= @u.name %> 

</div>


<% end %>

<% end %>

<div class="row">
<div class="col-md-4">
  <h2>Members</h2>
  <% @group.users.each do |f| %>
  <%= link_to f.name, user_path(f), :class=> "btn btn-warning" %> 
  <% end %>
</div>

<div class="col-md-4">
<h2>Stuffs</h2>
  <% @group.users.each do |f| %>
  <% f.stuffs.each do |s| %>
      <%= link_to s.name, stuff_path(s), :class=> "btn btn-warning" %>
  <% end %> 
  <% end %>
</div>
</div>

</div>

<script>

$('a[data-remote=true]').live('ajax:before', function () {
   if ($(this).attr('ajax-loading')) {
     return false;
   } else {
     $(this).attr('ajax-loading', true);
   }
}).live('ajax:complete', function () {
  $(this).removeAttr('ajax-loading');
});


</script>
